<div class="container" *ngIf="course$ | async as course; else loading">
  <app-page>
    <app-navigation [navigationData]="navigationData"></app-navigation>
    <div class="head">
      <div class="title">
        <h1>
          {{ course.code + ' - ' + course.name }}&nbsp;
          <a><mat-icon [routerLink]="'/professor/course/' + course.code + '/edit'">edit</mat-icon></a>
        </h1>
      </div>
      <div class="status">
        <app-async-button (aclick)="statusButtonClicked()" [loading]="updatingStatus" color="basic">
          <span *ngIf="courseEnabled"><mat-icon>visibility</mat-icon> enabled</span>
          <span *ngIf="!courseEnabled"><mat-icon>visibility_off</mat-icon> disabled</span>
        </app-async-button>
      </div>
    </div>
    <table class="info main">
      <tr>
        <td>Professors</td>
        <td>
          <div class="professor-list" *ngIf="professors$ | async as professors">
            <div *ngFor="let professor of professors" class="professor">
              <app-user-tag [firstName]="professor.firstName" [lastName]="professor.lastName.toUpperCase()" [picture]="professor.picturePath"></app-user-tag>
            </div>
            <button mat-flat-button color="primary" (click)="addCollaboratorButtonClicked()">Add collaborator</button>
          </div>
        </td>
      </tr>
    </table>
    <app-tile title="Students" [titleLink]="'/professor/course/' + course.code + '/students'" icon="supervisor_account">
      <table class="info">
        <tr>
          <td>Students enrolled</td>
          <td><b>???</b></td>
        </tr>
      </table>
    </app-tile>
    <app-tile title="Teams" [titleLink]="'/professor/course/' + course.code + '/teams'" icon="account_tree">
      <table class="info">
        <tr>
          <td>Team size constraints</td>
          <td><i>min&emsp;</i><b>{{ course.minTeamMembers }}</b><span class="sep"></span><i>max&emsp;</i><b>{{ course.maxTeamMembers }}</b></td>
        </tr>
        <tr>
          <td>Teamed students</td>
          <td><b>???</b></td>
        </tr>
        <tr>
          <td>Unteamed students</td>
          <td><b>???</b></td>
        </tr>
      </table>
    </app-tile>
    <app-tile title="Homeworks" [titleLink]="'/professor/course/' + course.code + '/homeworks'" icon="perm_media">
    </app-tile>
    <app-tile title="Actions" icon="amp_stories">
      <div class="actions">
        <button mat-flat-button color="primary" [routerLink]="'/professor/course/' + course.code + '/edit'">Edit course</button>
        <button mat-flat-button color="danger" (click)="deleteButtonClicked()">Delete course</button>
      </div>
    </app-tile>
  </app-page>
  <app-fullscreen-search [class.hidden]="!showSearch" [focus]="showSearch" [matches]="professorMatches" (search)="searchChanged($event)" (selectResult)="searchResultSelected($event)" (close)="searchCloseButtonClicked()">
  </app-fullscreen-search>
</div>
<ng-template #loading>
  <app-data-placeholder></app-data-placeholder>
</ng-template>